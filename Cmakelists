cmake_minimum_required(VERSION 3.10)

project(PointProcessing)

# Set build type to Release for performance optimization
set(CMAKE_BUILD_TYPE Release)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Specify the target architecture
set(CMAKE_OSX_ARCHITECTURES x86_64) # Target x86_64

# This line tells CMake to use the vcpkg toolchain file.
set(CMAKE_TOOLCHAIN_FILE "/Users/ciaratorguson/vcpkg/scripts/buildsystems/vcpkg.cmake" CACHE STRING "")

# Paths for vcpkg includes and libraries (x86_64)

# Find necessary packages using vcpkg
find_package(CGAL CONFIG REQUIRED)
find_package(GMP CONFIG REQUIRED)
find_package(MPFR CONFIG REQUIRED)

# Add MATLAB's include and lib paths
include_directories(/Applications/MATLAB_R2023b.app/extern/include)
link_directories(/Applications/MATLAB_R2023b.app/bin/maci64)

# Specify the target and source files for the executable
# Make sure the path to main.cpp is correct
add_executable(PointProcessing /Users/ciaratorguson/point_processing/main.cpp)

# Suppress the warning related to find_package using upper-case variables
cmake_policy(SET CMP0144 NEW)

# Linking necessary libraries
target_link_libraries(PointProcessing PRIVATE CGAL::CGAL GMP::GMP MPFR::MPFR ${MATLAB_LIBRARIES})

# Set the output name to have the appropriate MEX extension for MATLAB
set_target_properties(PointProcessing PROPERTIES PREFIX "" SUFFIX ".mexmaci64")
